
service: images
frameworkVersion: '3'

provider:
  name: aws
  runtime: go1.x
  region: ap-southeast-1

  environment:
    S3_BUCKET: "images-dev-serverlessdeploymentbucket-1h7wjymn8ja6t"
    IMAGE_BLOG: "image-blog/"
    ROLE: "images-dev-ap-southeast-1-lambdaRole"
    DB_USER: "postgres"
    DB_PASS: "qojse3-suwkub-tesKox"
    DB_HOST: "simpson.cd5ykwloyirn.ap-southeast-1.rds.amazonaws.com"
    DB_PORT: 5432
    DB_SERVICE: "postgres"
    DB_SCHEMA: "public"
    DB_MAX_IDLE_CONN: 2
    DB_MAX_OPEN_CONN: 2
    IS_ACTIVE_HISTORY: true
    IS_DEBUG_SQL: true

package:
  patterns:
    - '!./**'
    - ./bin/**

functions:
  insertImage:
    handler: bin/insertImage
    timeout: 3
    memorySize: 512
    description: insert image of blog to s3
    events:
      - http:
          path: /image/insert
          method: post
          # private: true
    environment:
      TEST_ENV: "test"
      TEST_1_ENV: "tes11t"
  getImage:
    handler: bin/getImage
    timeout: 3
    memorySize: 512
    description: get image of blog to s3
    events:
      - http:
          path: /image/get
          method: post
          # private: true
    environment:
      TEST_ENV: "test"
      TEST_1_ENV: "tes11t"
  articles:
    handler: bin/articles
    timeout: 3
    memorySize: 512
    description: get list article
    events:
      - http:
          path: /articles
          method: get
          # private: true
    environment:
      TEST_ENV: "test"
      TEST_1_ENV: "tes11t"
  articleDetail:
    handler: bin/articleDetail
    timeout: 3
    memorySize: 512
    description: get list article
    events:
      - http:
          path: /article
          method: get
          # private: true
    environment:
      TEST_ENV: "test"
      TEST_1_ENV: "tes11t"